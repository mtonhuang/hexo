(()=>{const{author:e}=window.AD_CONFIG;document.addEventListener("copy",t=>{let o=t.clipboardData||window.clipboardData;if(!o)return;t.preventDefault();const n=window.getSelection().toString(),l=n+"\n\n"+(e?`作者: ${e}\n`:"")+"链接: "+window.location.href+"\n来源: "+window.location.host+"\n著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\n\n",r=n+"<br/><br/>"+(e?`<b>作者</b>: ${e}<br/>`:"")+`<b>链接</b>: <a href="${window.location.href}">${window.location.href}</a><br/>`+`<b>来源</b>: <a href="${window.location.origin}">${window.location.host}</a><br/>`+"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。<br/>";o.setData("text/html",r),o.setData("text/plain",l)})})(),(()=>{const e=document.querySelector("#site-layer"),{layer:t}=window.AD_CONFIG;e.addEventListener("click",o=>{(o.target.matches("#site-layer-close")||o.target.matches("#site-layer"))&&(t.trigger(),e.style.display="none")})})(),(()=>{const e=(()=>{const e=document.querySelector("#site-process");let t=!1;return()=>{t||(t=!0,window.requestAnimationFrame(o=>{let n=document.documentElement.scrollTop||document.body.scrollTop,l=document.documentElement.scrollHeight||document.body.scrollHeight,r=document.documentElement.clientHeight||document.body.clientHeight;t=!1;let c=100*n/(l-r);c>99?c=100:c<1&&(c=0),e.style.width=`${c}%`}))}})();e(),document.addEventListener("scroll",e,!1)})(),document.querySelector("#back-top-btn").addEventListener("click",(()=>{let e=!1;return()=>{if(e)return;e=!0;let t=document.documentElement.scrollTop||document.body.scrollTop;if(t<=10)return document.documentElement.scrollTop=0,document.body.scrollTop=0,void(e=!1);let o=Math.ceil(10*t/200),n=setInterval(()=>{(t=document.documentElement.scrollTop||document.body.scrollTop)<=o?(document.documentElement.scrollTop=0,document.body.scrollTop=0,e=!1,clearInterval(n)):(document.documentElement.scrollTop=t-o,document.body.scrollTop=t-o)},10)}})(),!1),(()=>{const{start_time:e}=window.AD_CONFIG,[t,o,n]=e.split("-"),l={year:parseInt(t,10),month:parseInt(o,10),day:parseInt(n,10)};isNaN(l.year)&&(l.year=2018),isNaN(l.month)&&(l.month=2),isNaN(l.day)&&(l.day=10);const r=function(e="",t={}){const o=document.querySelector(e),n=new Date(t.year,t.month-1,t.day).getTime();return()=>{let e=parseInt(((new Date).getTime()-n)/1e3,10),t=Math.floor(e/86400),l=Math.floor(e%86400/3600),r=Math.floor(e%86400%3600/60),c=Math.floor(e%86400%3600%60);o.innerHTML=t+"天"+l+"时"+r+"分"+c+"秒"}}("#site-time",l);r(),setInterval(r,1e3)})(),(()=>{function e(e){let t=`https://www.google.com/search?q=${e=`site:${window.location.hostname} ${decodeURIComponent(e)}`}`;window.open(t)}const t=document.querySelector("#site-search"),o=document.querySelector("#site-nav"),n=document.querySelector("#site-nav-btn"),l=document.querySelector("#site-layer"),r=l.querySelector(".site-layer-content"),c=document.querySelector("#site-layer-title"),i=document.querySelector("#site-layer-search"),s=i.querySelector("input"),d=i.querySelector("i");t.addEventListener("click",e=>{l.style.display="block",i.style.display="flex",s.focus(),c.innerHTML="搜索",window.AD_CONFIG.layer.add(()=>{c.innerHTML="",s.blur(),i.style.display="none"})}),s.addEventListener("keypress",t=>{let o=t.which||t.keyCode,n=s.value.trim();13===o&&n.length>0&&e(n)}),d.addEventListener("click",t=>{s.focus();let o=s.value.trim();o.length>0&&e(o)}),n.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),l.style.display="block",r.style.display="none",o.style.right="0",window.AD_CONFIG.layer.add(()=>{o.style.right="",l.style.display="none",r.style.display=""})})})(),(()=>{function e(e){window.open(e.target.getAttribute("src"),"_blank")}const{is_post:t,page_type:o}=window.AD_CONFIG;if(document.querySelectorAll(".passage-article").forEach(t=>t.querySelectorAll("img").forEach(t=>t.addEventListener("click",e))),!t&&!1===["about","friends"].includes(o))return;const n=document.querySelector("#site-layer"),l=n.querySelector(".site-layer-content"),r=document.querySelector("#site-toc"),c=document.querySelector("#site-toc-show-btn"),i=document.querySelector("#site-toc-hide-btn");c&&c.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),n.style.display="block",l.style.display="none",r.style.right="0",window.AD_CONFIG.layer.add(()=>{r.style.right="",n.style.display="none",l.style.display=""})}),i&&i.addEventListener("click",window.AD_CONFIG.layer.trigger)})();