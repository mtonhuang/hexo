(()=>{function e(e={}){let t="?";for(let n of Reflect.ownKeys(e)){t=`${t}${n}=${e[n]?encodeURIComponent(e[n]):""}&`}return t.slice(0,t.length-1)}const t=(()=>{const t="https://twitter.com/intent/tweet",n="https://www.facebook.com/sharer/sharer.php",o="http://connect.qq.com/widget/shareqq/index.html",r="http://service.weibo.com/share/share.php",i=document.title,c=document.querySelector("meta[name='description']").getAttribute("content"),a=`${window.location.origin}${window.location.pathname}`,l={twitter:{url:a,text:`${i}\n\n${c}\n\n`,via:window.location.origin},facebook:{u:a},weibo:{url:a,title:`${i}\n\n${c}`},qq:{url:a,title:i,desc:c}};return{twitter:`${t}${e(l.twitter)}`,facebook:`${n}${e(l.facebook)}`,weibo:`${r}${e(l.weibo)}`,qq:`${o}${e(l.qq)}`}})(),{share:n}=window.AD_CONFIG,o=Reflect.ownKeys(n).filter(e=>n[e]);for(let e of o)"wechat"!==e&&document.querySelector(`#share-btn-${e}`).setAttribute("href",t[e]);o.includes("wechat")&&(document.querySelector("#share-btn-wechat").addEventListener("click",e=>{e.preventDefault(),e.stopPropagation();const t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-container"),o=document.querySelector("#site-layer-title"),r=document.createElement("div");t.style.display="block",o.innerHTML="微信分享",n.appendChild(r);const i=new QRCode(r,{text:`${window.location.origin}${window.location.pathname}`,width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});window.AD_CONFIG.layer.add(()=>{o.innerHTML="",i.clear(),r.remove()})}),o.length>0&&document.querySelector("#site-toggle-share-btn").addEventListener("click",function(){let e=!1;const t=document.querySelector("#share-btn");return n=>{n.stopPropagation(),n.preventDefault(),e=!e,t.style.display=e?"flex":"none"}}()))})(),(()=>{const e=document.querySelector("#site-reward");if(!e)return;const t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-title"),o=document.querySelector("#site-layer-reward");e.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),t.style.display="block",n.innerHTML="打赏赞助",o.style.display="flex",window.AD_CONFIG.layer.add(()=>{n.innerHTML="",o.style.display="none"})})})(),(()=>{const{mathjax:e}=window.AD_CONFIG;if(!e)return;window.MathJax.Hub.Config({showProcessingMessages:!1,messageStyle:"none",jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],skipTags:["script","noscript","style","textarea","pre","code","a"]},"HTML-CSS":{availableFonts:["STIX","TeX"],showMathMenu:!1}}),window.MathJax.Hub.Queue(["Typeset",MathJax.Hub,document.querySelector("main")])})(),(()=>{const{leancloud:e,welcome:t}=window.AD_CONFIG;let n=0;function o(e){e||(e=window.location.pathname);let t=e.split("/");for(let e=t.length-1;e>=0;--e){let n=t[e].trim();if(n.length>0&&"/"!==n&&"index.html"!==n)return n}return"/"}if(t.interval=Math.abs(parseInt(t.interval,10))||30,(!1!==e.comment||!1!==e.count)&&function(){try{return window.AV.init(e.appid,e.appkey),!0}catch(e){return!1}}()&&(!0===e.count&&(function(){let e=new AV.Query("Counter");return new Promise(t=>{e.count().then(e=>t(e+1),e=>{console.log("Error occurs when count in leancloud.js:",e.message),t(0)})})}().then(e=>{document.querySelector("#site-count").innerHTML=e,n=e}),function(){let e=decodeURIComponent(window.location.pathname);!e.endsWith("/")&&(e+="/");let t=new(AV.Object.extend("Counter"));t.set("visit_time",(new Date).getTime().toString()),t.set("user_agent",window.navigator.userAgent),t.set("identity_path",e),t.set("more_info",JSON.stringify(window.location));let n=new AV.ACL;n.setPublicReadAccess(!0),n.setPublicWriteAccess(!1),t.setACL(n),t.save()}()),!0===e.comment)){if(!document.querySelector("#site-comment"))return;const t=function(){const e=document.querySelector("#site-comment-info"),t=o();let n=!1;return(o=1e3)=>{n||setTimeout(()=>{n=!0;let o=new AV.Query("Comment");o.equalTo("url",t),o.count().then(t=>{e.innerHTML=`共${t}条评论`,n=!1})},o)}}();t(0),new Valine({el:"#site-comment",appId:e.appid,appKey:e.appkey,notify:!1,verify:!1,avatar:"robohash",placeholder:"正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",path:o()}),document.querySelector(".vsubmit.vbtn").addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),t(1e3)})}})();