"use strict";!function(){function e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t="?",n=!0,o=!1,r=void 0;try{for(var i,c=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var a=i.value;t=""+t+a+"="+(e[a]?encodeURIComponent(e[a]):"")+"&"}}catch(e){o=!0,r=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}return t.slice(0,t.length-1)}var t,n,o,r,i,c,a,l,u,d,s=(t="https://twitter.com/intent/tweet",n="https://www.facebook.com/sharer/sharer.php",o="http://connect.qq.com/widget/shareqq/index.html",r="http://service.weibo.com/share/share.php",i=document.title,c=document.querySelector("meta[name='description']").getAttribute("content"),a=""+window.location.origin+window.location.pathname,l={twitter:{url:a,text:i+"\n\n"+c+"\n\n",via:window.location.origin},facebook:{u:a},weibo:{url:a,title:i+"\n\n"+c},qq:{url:a,title:i,desc:c}},{twitter:""+t+e(l.twitter),facebook:""+n+e(l.facebook),weibo:""+r+e(l.weibo),qq:""+o+e(l.qq)}),w=window.AD_CONFIG.share,f=Reflect.ownKeys(w).filter(function(e){return w[e]}),m=!0,y=!1,h=void 0;try{for(var p,v=f[Symbol.iterator]();!(m=(p=v.next()).done);m=!0){var g=p.value;"wechat"!==g&&document.querySelector("#share-btn-"+g).setAttribute("href",s[g])}}catch(e){y=!0,h=e}finally{try{!m&&v.return&&v.return()}finally{if(y)throw h}}f.includes("wechat")&&(document.querySelector("#share-btn-wechat").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-container"),o=document.querySelector("#site-layer-title"),r=document.createElement("div");t.style.display="block",o.innerHTML="微信分享",n.appendChild(r);var i=new QRCode(r,{text:""+window.location.origin+window.location.pathname,width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});window.AD_CONFIG.layer.add(function(){o.innerHTML="",i.clear(),r.remove()})}),0<f.length&&document.querySelector("#site-toggle-share-btn").addEventListener("click",(u=!1,d=document.querySelector("#share-btn"),function(e){e.stopPropagation(),e.preventDefault(),u=!u,d.style.display=u?"flex":"none"})))}(),function(){var e=document.querySelector("#site-reward");if(e){var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-title"),o=document.querySelector("#site-layer-reward");e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.style.display="block",n.innerHTML="打赏赞助",o.style.display="flex",window.AD_CONFIG.layer.add(function(){n.innerHTML="",o.style.display="none"})})}}(),function(){var e,t,n,o,r=window.AD_CONFIG,i=r.leancloud,c=r.welcome;function a(e){e||(e=window.location.pathname);for(var t=e.split("/"),n=t.length-1;0<=n;--n){var o=t[n].trim();if(0<o.length&&"/"!==o&&"index.html"!==o)return o}return"/"}if((c.interval=Math.abs(parseInt(c.interval,10))||30,!1!==i.comment||!1!==i.count)&&(function(){try{return window.AV.init(i.appid,i.appkey),!0}catch(e){return!1}}()&&(!0===i.count&&((e=new AV.Query("Counter"),new Promise(function(t){e.count().then(function(e){return t(e+1)},function(e){void 0,t(0)})})).then(function(e){document.querySelector("#site-count").innerHTML=e,e}),function(){var e=decodeURIComponent(window.location.pathname);!e.endsWith("/")&&(e+="/");var t=new(AV.Object.extend("Counter"));t.set("visit_time",(new Date).getTime().toString()),t.set("user_agent",window.navigator.userAgent),t.set("identity_path",e),t.set("more_info",JSON.stringify(window.location));var n=new AV.ACL;n.setPublicReadAccess(!0),n.setPublicWriteAccess(!1),t.setACL(n),t.save()}()),!0===i.comment))){if(!document.querySelector("#site-comment"))return;var l=(t=document.querySelector("#site-comment-info"),n=a(),o=!1,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;o||setTimeout(function(){o=!0;var e=new AV.Query("Comment");e.equalTo("url",n),e.count().then(function(e){t.innerHTML="共"+e+"条评论",o=!1})},e)});l(0),new Valine({el:"#site-comment",appId:i.appid,appKey:i.appkey,notify:!1,verify:!1,avatar:"robohash",placeholder:"正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",path:a()}),document.querySelector(".vsubmit.vbtn").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),l(1e3)})}}();