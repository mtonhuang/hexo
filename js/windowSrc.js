"use strict";!function(){function e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t="?",n=!0,r=!1,o=void 0;try{for(var i,a=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;t=""+t+c+"="+(e[c]?encodeURIComponent(e[c]):"")+"&"}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return t.slice(0,t.length-1)}var t,n,r,o,i,a,c,l,u,d,s=(t="https://twitter.com/intent/tweet",n="https://www.facebook.com/sharer/sharer.php",r="http://connect.qq.com/widget/shareqq/index.html",o="http://service.weibo.com/share/share.php",i=document.title,a=document.querySelector("meta[name='description']").getAttribute("content"),c=""+window.location.origin+window.location.pathname,l={twitter:{url:c,text:i+"\n\n"+a+"\n\n",via:window.location.origin},facebook:{u:c},weibo:{url:c,title:i+"\n\n"+a},qq:{url:c,title:i,desc:a}},{twitter:""+t+e(l.twitter),facebook:""+n+e(l.facebook),weibo:""+o+e(l.weibo),qq:""+r+e(l.qq)}),f=window.AD_CONFIG.share,y=Reflect.ownKeys(f).filter(function(e){return f[e]}),m=!0,w=!1,p=void 0;try{for(var h,v=y[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var q=h.value;"wechat"!==q&&document.querySelector("#share-btn-"+q).setAttribute("href",s[q])}}catch(e){w=!0,p=e}finally{try{!m&&v.return&&v.return()}finally{if(w)throw p}}y.includes("wechat")&&(document.querySelector("#share-btn-wechat").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-container"),r=document.querySelector("#site-layer-title"),o=document.createElement("div");t.style.display="block",r.innerHTML="微信分享",n.appendChild(o);var i=new QRCode(o,{text:""+window.location.origin+window.location.pathname,width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});window.AD_CONFIG.layer.add(function(){r.innerHTML="",i.clear(),o.remove()})}),0<y.length&&document.querySelector("#site-toggle-share-btn").addEventListener("click",(u=!1,d=document.querySelector("#share-btn"),function(e){e.stopPropagation(),e.preventDefault(),u=!u,d.style.display=u?"flex":"none"})))}(),function(){var e=document.querySelector("#site-reward");if(e){var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-title"),r=document.querySelector("#site-layer-reward");e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.style.display="block",n.innerHTML="打赏赞助",r.style.display="flex",window.AD_CONFIG.layer.add(function(){n.innerHTML="",r.style.display="none"})})}}(),function(){var t,n,r,e=window.AD_CONFIG,o=e.leancloud,i=e.welcome;function a(e){e||(e=window.location.pathname);for(var t=e.split("/"),n=t.length-1;0<=n;--n){var r=t[n].trim();if(0<r.length&&"/"!==r&&"index.html"!==r)return r}return"/"}if((i.interval=Math.abs(parseInt(i.interval,10))||30,!1!==o.comment||!1!==o.count)&&(function(){try{return window.AV.init(o.appid,o.appkey),!0}catch(e){return!1}}()&&!0===o.comment)){if(!document.querySelector("#site-comment"))return;var c=(t=document.querySelector("#site-comment-info"),n=a(),r=!1,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;r||setTimeout(function(){r=!0;var e=new AV.Query("Comment");e.equalTo("url",n),e.count().then(function(e){t.innerHTML="共"+e+"条评论",r=!1})},e)});c(0),new Valine({el:"#site-comment",appId:o.appid,appKey:o.appkey,notify:!1,verify:!1,avatar:"robohash",placeholder:"正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",path:a()}),document.querySelector(".vsubmit.vbtn").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),c(1e3)})}}();