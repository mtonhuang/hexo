"use strict";!function(){function e(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t="?",n=!0,o=!1,r=void 0;try{for(var i,a=Reflect.ownKeys(e)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var c=i.value;t=""+t+c+"="+(e[c]?encodeURIComponent(e[c]):"")+"&"}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return t.slice(0,t.length-1)}var t,n,o,r,i,a,c,l,u,s,d=(t="https://twitter.com/intent/tweet",n="https://www.facebook.com/sharer/sharer.php",o="http://connect.qq.com/widget/shareqq/index.html",r="http://service.weibo.com/share/share.php",i=document.title,a=document.querySelector("meta[name='description']").getAttribute("content"),c=""+window.location.origin+window.location.pathname,l={twitter:{url:c,text:i+"\n\n"+a+"\n\n",via:window.location.origin},facebook:{u:c},weibo:{url:c,title:i+"\n\n"+a},qq:{url:c,title:i,desc:a}},{twitter:""+t+e(l.twitter),facebook:""+n+e(l.facebook),weibo:""+r+e(l.weibo),qq:""+o+e(l.qq)}),w=window.AD_CONFIG.share,f=Reflect.ownKeys(w).filter(function(e){return w[e]}),h=!0,m=!1,y=void 0;try{for(var p,v=f[Symbol.iterator]();!(h=(p=v.next()).done);h=!0){var g=p.value;"wechat"!==g&&document.querySelector("#share-btn-"+g).setAttribute("href",d[g])}}catch(e){m=!0,y=e}finally{try{!h&&v.return&&v.return()}finally{if(m)throw y}}f.includes("wechat")&&(document.querySelector("#share-btn-wechat").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-container"),o=document.querySelector("#site-layer-title"),r=document.createElement("div");t.style.display="block",o.innerHTML="微信分享",n.appendChild(r);var i=new QRCode(r,{text:""+window.location.origin+window.location.pathname,width:256,height:256,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});window.AD_CONFIG.layer.add(function(){o.innerHTML="",i.clear(),r.remove()})}),0<f.length&&document.querySelector("#site-toggle-share-btn").addEventListener("click",(u=!1,s=document.querySelector("#share-btn"),function(e){e.stopPropagation(),e.preventDefault(),u=!u,s.style.display=u?"flex":"none"})))}(),function(){var e=document.querySelector("#site-reward");if(e){var t=document.querySelector("#site-layer"),n=document.querySelector("#site-layer-title"),o=document.querySelector("#site-layer-reward");e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.style.display="block",n.innerHTML="打赏赞助",o.style.display="flex",window.AD_CONFIG.layer.add(function(){n.innerHTML="",o.style.display="none"})})}}(),function(){if(window.AD_CONFIG.mathjax){window.MathJax.Hub.Config({showProcessingMessages:!1,messageStyle:"none",jax:["input/TeX","output/HTML-CSS"],tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],skipTags:["script","noscript","style","textarea","pre","code","a"]},"HTML-CSS":{availableFonts:["STIX","TeX"],showMathMenu:!1}}),window.MathJax.Hub.Queue(["Typeset",MathJax.Hub,document.querySelector("main")])}}(),function(){var e,t,n,o,r=window.AD_CONFIG,i=r.leancloud,a=r.welcome;function c(e){e||(e=window.location.pathname);for(var t=e.split("/"),n=t.length-1;0<=n;--n){var o=t[n].trim();if(0<o.length&&"/"!==o&&"index.html"!==o)return o}return"/"}if((a.interval=Math.abs(parseInt(a.interval,10))||30,!1!==i.comment||!1!==i.count)&&(function(){try{return window.AV.init(i.appid,i.appkey),!0}catch(e){return!1}}()&&(!0===i.count&&((e=new AV.Query("Counter"),new Promise(function(t){e.count().then(function(e){return t(e+1)},function(e){void 0,t(0)})})).then(function(e){document.querySelector("#site-count").innerHTML=e,e}),function(){var e=decodeURIComponent(window.location.pathname);!e.endsWith("/")&&(e+="/");var t=new(AV.Object.extend("Counter"));t.set("visit_time",(new Date).getTime().toString()),t.set("user_agent",window.navigator.userAgent),t.set("identity_path",e),t.set("more_info",JSON.stringify(window.location));var n=new AV.ACL;n.setPublicReadAccess(!0),n.setPublicWriteAccess(!1),t.setACL(n),t.save()}()),!0===i.comment))){if(!document.querySelector("#site-comment"))return;var l=(t=document.querySelector("#site-comment-info"),n=c(),o=!1,function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e3;o||setTimeout(function(){o=!0;var e=new AV.Query("Comment");e.equalTo("url",n),e.count().then(function(e){t.innerHTML="看看评论说什么",o=!1})},e)});l(0),new Valine({el:"#site-comment",appId:i.appid,appKey:i.appkey,notify:!1,verify:!1,avatar:"robohash",placeholder:"正确填写邮箱, 才能及时收到回复哦♪(^∇^*)",path:c()}),document.querySelector(".vsubmit.vbtn").addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),l(1e3)})}}();